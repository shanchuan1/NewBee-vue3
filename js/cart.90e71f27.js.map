{"version":3,"file":"js/cart.90e71f27.js","mappings":"kOACUA,MAAM,sC,aAGPA,MAAM,sB,UACXC,EAAAA,EAAAA,GAA6B,KAA1BD,MAAM,iBAAe,W,UAE1BC,EAAAA,EAAAA,GAAqB,OAAhBD,MAAM,SAAO,W,8DANlBC,EAAAA,EAAAA,GAKS,SALT,EAKS,CAJGC,EAAAA,SAAV,WACAC,EAAAA,EAAAA,IAAkD,IAAAC,EAAxC,aADAF,EAAAA,EAAAA,OAAVC,EAAAA,EAAAA,IAA8D,K,MAA5CH,MAAM,kBAAmBK,QAAK,oBAAEH,EAAAA,QAAAA,EAAAA,UAAAA,QAElDD,EAAAA,EAAAA,GAAgD,MAAhD,GAAgDK,EAAAA,EAAAA,IAAbC,EAAAA,MAAI,GACvCC,IAEFC,GAAAA,I,uBAMF,GACEC,MAAO,CACLC,KAAM,CACJC,KAAMC,OACNC,QAAS,IAEXC,KAAM,CACJH,KAAMC,OACNC,QAAS,IAEXE,OAAQ,CACNJ,KAAMK,QACNH,SAAS,IAGbI,MAAO,CAAC,YACRC,MAAMT,EAAOU,GACX,MAAMC,GAASC,EAAAA,EAAAA,IAAIZ,EAAMM,QACnBO,GAASC,EAAAA,EAAAA,MACTC,EAAS,KACRf,EAAMK,KAGTQ,EAAOG,KAAK,CAAEC,KAAMjB,EAAMK,OAF1BQ,EAAOK,IAAI,GAIbR,EAAIS,KAAK,aAEX,MAAO,CACLJ,SACAJ,Y,QCnCN,MAAMS,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAEzF,S,mGCPO/B,MAAM,Y,GAEJA,MAAM,a,GAGAA,MAAM,a,GAEJA,MAAM,Y,aACNA,MAAM,a,GACJA,MAAM,c,GAINA,MAAM,Y,GACJA,MAAM,S,WAgBsC,M,SAGxDA,MAAM,S,GACTC,EAAAA,EAAAA,GAA4F,OAAvFD,MAAM,aAAagC,IAAI,qDAAqDC,IAAI,QAArF,S,GACAhC,EAAAA,EAAAA,GAAgC,OAA3BD,MAAM,SAAQ,WAAO,G,WAC2C,Q,sQApCzEG,EAAAA,EAAAA,IAuCM,MAvCN,EAuCM,EAtCJ+B,EAAAA,EAAAA,IAAkDC,EAAA,CAAvCxB,KAAM,MAAQK,QAAQ,KACjCf,EAAAA,EAAAA,GAuBM,MAvBN,EAuBM,EAtBJiC,EAAAA,EAAAA,IAqBqBE,EAAA,CArBAC,SAAQnC,EAAAA,Y,WAAsBoC,EAAAA,O,qCAAAA,EAAAA,OAAMC,GAAEjB,IAAI,iBAA/D,C,kBACoC,IAA6B,gBAA/DnB,EAAAA,EAAAA,IAmBiBqC,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IAnByCH,EAAAA,MAAI,CAApBI,EAAMC,M,WAAhDC,EAAAA,EAAAA,IAmBiBC,EAAA,CAnBA,cAAa,GAAmCC,IAAKH,GAAtE,CAgBaI,OAAK,SACd,IAA4G,EAA5Gb,EAAAA,EAAAA,IAA4Gc,EAAA,CAAhGC,OAAA,GAAOC,KAAK,SAAStC,KAAK,SAASZ,MAAM,gBAAiBK,QAAK,GAAEH,EAAAA,WAAWwC,EAAKS,aAA7F,uB,kBAhBF,IAcM,EAdNlD,EAAAA,EAAAA,GAcM,MAdN,EAcM,EAbJiC,EAAAA,EAAAA,IAAwCkB,EAAA,CAAzBzC,KAAM+B,EAAKS,YAA1B,kBACAlD,EAAAA,EAAAA,GAAmF,MAAnF,EAAmF,EAA7DA,EAAAA,EAAAA,GAAuD,OAAjD+B,IAAKM,EAAAA,SAASe,OAAOX,EAAKY,eAAgBrB,IAAI,IAApD,aACtBhC,EAAAA,EAAAA,GAUM,MAVN,EAUM,EATJA,EAAAA,EAAAA,GAGM,MAHN,EAGM,EAFJA,EAAAA,EAAAA,GAAiC,aAAAK,EAAAA,EAAAA,IAAxBoC,EAAKa,WAAS,IACvBtD,EAAAA,EAAAA,GAAmC,YAA7B,KAACK,EAAAA,EAAAA,IAAGoC,EAAKc,YAAU,MAE3BvD,EAAAA,EAAAA,GAIM,MAJN,EAIM,EAHJA,EAAAA,EAAAA,GAAiD,MAAjD,EAAmB,KAACK,EAAAA,EAAAA,IAAGoC,EAAKe,cAAY,IACxCvB,EAAAA,EAAAA,IACoCwB,EAAA,CADvBC,QAAA,GAASC,IAAK,EAAIC,IAAK,EAAI,cAAanB,EAAKc,WAAa7C,KAAM+B,EAAKS,WAChF,kBAAcd,SAAQnC,EAAAA,UADxB,mD,KAXR,kB,KADF,+BAyBoBoC,EAAAA,KAAKwB,OAAM,eAAjClB,EAAAA,EAAAA,IAGiBmB,EAAA,C,MAHsB/D,MAAM,+BAAgCgE,MAAY,IAAL9D,EAAAA,MAAa,cAAY,KAC1G+D,SAAQ/D,EAAAA,UADX,C,kBAEE,IAA4E,EAA5EgC,EAAAA,EAAAA,IAA4EkB,EAAA,CAA7D/C,QAAOH,EAAAA,SAAkBgE,QAAS5B,EAAAA,S,kCAAAA,EAAAA,SAAQC,IAAzD,C,kBAA2D,IAAE,M,KAA7D,4B,KAFF,yCAK0BD,EAAAA,KAAKwB,QAA/B,iBAA+BA,EAAAA,EAAAA,OAA/B3D,EAAAA,EAAAA,IAIM,MAJN,EAIM,CAHJgE,EACAC,GACAlC,EAAAA,EAAAA,IAAsFc,EAAA,CAA1EqB,MAAA,GAAMC,MAAM,UAAU1D,KAAK,UAAWP,QAAOH,EAAAA,KAAMqE,MAAA,IAA/D,C,kBAAqE,IAAI,M,KAAzE,mBAEFrC,EAAAA,EAAAA,IAAmBsC,K,wFAevB,GACEC,WAAY,CACVC,OADU,IAEVC,QAAOA,EAAAA,GAETxD,QACE,MAAMI,GAASC,EAAAA,EAAAA,MACToD,GAAQC,EAAAA,EAAAA,MACRC,GAAQC,EAAAA,EAAAA,IAAS,CACrBb,SAAS,EACTc,KAAM,GACNC,KAAK,EACLC,OAAQ,GACRC,UAAU,KAGZC,EAAAA,EAAAA,KAAU,KACRC,OAGF,MAAMA,EAAOC,UACX,YAAc,CAAEC,QAAS,SAAUC,aAAa,IAChD,MAAM,KAAEC,SAAeC,EAAAA,EAAAA,IAAQ,CAAEC,WAAY,IAC7CC,QAAQC,IAAIJ,GACZX,EAAME,KAAOS,EACbX,EAAMI,OAASO,EAAKK,KAAIpD,GAAQA,EAAKS,aACrCyC,QAAQC,IAAI,OAAOf,EAAMI,QACzB,aAGIa,GAAQC,EAAAA,EAAAA,KAAS,KACrB,IAAIC,EAAQnB,EAAME,KAAKkB,QAAOxD,GAAQoC,EAAMI,OAAOiB,SAASzD,EAAKS,cACjEyC,QAAQC,IAAII,GAEZ,IAAIG,EAAMH,EAAMI,QAAO,CAACC,EAAKC,IACpBD,EAAMC,EAAQ/C,WAAa+C,EAAQ9C,cACzC,GACH,OAAO2C,KAGH3E,EAAS,KACbF,EAAOK,IAAI,IAGP4E,EAAO,KACXjF,EAAOG,KAAK,CAAEC,KAAM,WAGhBU,EAAWiD,MAAOmB,EAAOC,KAC7B,GAAI5B,EAAME,KAAKkB,QAAOxD,GAAQA,EAAKS,YAAcuD,EAAO/F,OAAM,GAAG6C,YAAciD,EAAO,OACtF,YAAc,CAAElB,QAAS,SAAUC,aAAa,IAChD,MAAMmB,EAAS,CACbxD,WAAYuD,EAAO/F,KACnB6C,WAAYiD,SAERG,EAAAA,EAAAA,IAAWD,GACjB7B,EAAME,KAAK6B,SAAQnE,IACbA,EAAKS,YAAcuD,EAAO/F,OAC5B+B,EAAKc,WAAaiD,MAGtB,aAGIxC,EAAWqB,UACf,GAA2B,GAAvBR,EAAMI,OAAOpB,OAEf,YADA,SAAW,aAGb,MAAM6C,EAASG,KAAKC,UAAUjC,EAAMI,QACpCU,QAAQC,IAAIc,GACZpF,EAAOG,KAAK,CAAEC,KAAM,gBAAiBqF,MAAO,CAAEC,YAAaN,MAIvDO,EAAa5B,gBAEX6B,EAAAA,EAAAA,IAAeC,GACrBxC,EAAMyC,SAAS,cACfhC,KAGIiC,EAAepC,IACnBU,QAAQC,IAAIX,GACZJ,EAAMK,SAAWD,EAAOpB,QAAUgB,EAAME,KAAKlB,QAGzCyD,EAAW,KACVzC,EAAMK,SAGTL,EAAMI,OAAS,GAFfJ,EAAMI,OAASJ,EAAME,KAAKc,KAAIpD,GAAQA,EAAKS,cAQ/C,MAAO,KACFqE,EAAAA,EAAAA,IAAO1C,GACViB,QACAtE,SACA+E,OACAnE,WACA4B,WACAiD,aACAI,cACAC,c,QC1JN,MAAMzF,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,KAEpE","sources":["webpack://NewBee/./src/components/SimpleHeader.vue","webpack://NewBee/./src/components/SimpleHeader.vue?b208","webpack://NewBee/./src/views/Cart.vue","webpack://NewBee/./src/views/Cart.vue?27b4"],"sourcesContent":["<template>\n  <header class=\"simple-header van-hairline--bottom\">\n    <i v-if=\"!isback\" class=\"nbicon nbfanhui\" @click=\"goBack\"></i>\n    <i v-else>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</i>\n    <div class=\"simple-header-name\">{{ name }}</div>\n    <i class=\"nbicon nbmore\"></i>\n  </header>\n  <div class=\"block\" />\n</template>\n\n<script>\nimport { ref } from 'vue'\nimport { useRouter } from 'vue-router'\nexport default {\n  props: {\n    name: {\n      type: String,\n      default: ''\n    },\n    back: {\n      type: String,\n      default: ''\n    },\n    noback: {\n      type: Boolean,\n      default: false\n    }\n  },\n  emits: ['callback'],\n  setup(props, ctx) {\n    const isback = ref(props.noback)\n    const router = useRouter()\n    const goBack = () => {\n      if (!props.back) {\n        router.go(-1)\n      } else {\n        router.push({ path: props.back })\n      }\n      ctx.emit('callback')\n    }\n    return {\n      goBack,\n      isback\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n  @import '../common/style/mixin';\n  .simple-header {\n    position: fixed;\n    top: 0;\n    left: 0;\n    z-index: 10000;\n    .fj();\n    .wh(100%, 44px);\n    line-height: 44px;\n    padding: 0 10px;\n    .boxSizing();\n    color: #252525;\n    background: #fff;\n    .simple-header-name {\n      font-size: 14px;\n    }\n  }\n  .block {\n    height: 44px;\n  }\n</style>","import { render } from \"./SimpleHeader.vue?vue&type=template&id=366c0458&scoped=true\"\nimport script from \"./SimpleHeader.vue?vue&type=script&lang=js\"\nexport * from \"./SimpleHeader.vue?vue&type=script&lang=js\"\n\nimport \"./SimpleHeader.vue?vue&type=style&index=0&id=366c0458&lang=less&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\大娱乐家\\\\Desktop\\\\h5-master\\\\code-vue3\\\\NewBee-vue3\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-366c0458\"]])\n\nexport default __exports__","\n<template>\n  <div class=\"cart-box\">\n    <s-header :name=\"'购物车'\" :noback=\"true\"></s-header>\n    <div class=\"cart-body\">\n      <van-checkbox-group @change=\"groupChange\" v-model=\"result\" ref=\"checkboxGroup\">\n        <van-swipe-cell :right-width=\"50\" v-for=\"(item, index) in list\" :key=\"index\">\n          <div class=\"good-item\">\n            <van-checkbox :name=\"item.cartItemId\" />\n            <div class=\"good-img\"><img :src=\"$filters.prefix(item.goodsCoverImg)\" alt=\"\"></div>\n            <div class=\"good-desc\">\n              <div class=\"good-title\">\n                <span>{{ item.goodsName }}</span>\n                <span>x{{ item.goodsCount }}</span>\n              </div>\n              <div class=\"good-btn\">\n                <div class=\"price\">¥{{ item.sellingPrice }}</div>\n                <van-stepper integer :min=\"1\" :max=\"5\" :model-value=\"item.goodsCount\" :name=\"item.cartItemId\"\n                  async-change @change=\"onChange\" />\n              </div>\n            </div>\n          </div>\n          <template #right>\n            <van-button square icon=\"delete\" type=\"danger\" class=\"delete-button\" @click=\"deleteGood(item.cartItemId)\" />\n          </template>\n        </van-swipe-cell>\n      </van-checkbox-group>\n    </div>\n\n    <!-- 提交结算表单 -->\n    <van-submit-bar v-if=\"list.length > 0\" class=\"submit-all van-hairline--top\" :price=\"total * 100\" button-text=\"结算\"\n      @submit=\"onSubmit\">\n      <van-checkbox @click=\"allCheck\" v-model:checked=\"checkAll\">全选</van-checkbox>\n    </van-submit-bar>\n\n    <div class=\"empty\" v-if=\"!list.length\">\n      <img class=\"empty-cart\" src=\"https://s.yezgea02.com/1604028375097/empty-car.png\" alt=\"空购物车\">\n      <div class=\"title\">购物车空空如也</div>\n      <van-button round color=\"#1baeae\" type=\"primary\" @click=\"goTo\" block>前往选购</van-button>\n    </div>\n    <nav-bar></nav-bar>\n  </div>\n</template>\n\n<script>\nimport { getCart, deleteCartItem, modifyCart } from '@/request/api'\n\n\nimport { reactive, onMounted, computed, toRefs } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { useStore } from 'vuex'\nimport { Toast } from 'vant'\nimport navBar from '@/components/NavBar'\nimport sHeader from '@/components/SimpleHeader'\n\nexport default {\n  components: {\n    navBar,\n    sHeader\n  },\n  setup() {\n    const router = useRouter()\n    const store = useStore()\n    const state = reactive({\n      checked: false,\n      list: [],\n      all: false,\n      result: [],\n      checkAll: true\n    })\n\n    onMounted(() => {\n      init()\n    })\n    // 初始化数据\n    const init = async () => {\n      Toast.loading({ message: '加载中...', forbidClick: true });\n      const { data } = await getCart({ pageNumber: 1 })\n      console.log(data);\n      state.list = data\n      state.result = data.map(item => item.cartItemId)\n      console.log('商品id'+state.result);\n      Toast.clear()\n    }\n\n    const total = computed(() => {\n      let _list = state.list.filter(item => state.result.includes(item.cartItemId))\n      console.log(_list);\n\n      let ret = _list.reduce((pre, current) => {\n        return pre + current.goodsCount * current.sellingPrice\n      }, 0)\n      return ret\n    })\n\n    const goBack = () => {\n      router.go(-1)\n    }\n\n    const goTo = () => {\n      router.push({ path: '/home' })\n    }\n\n    const onChange = async (value, detail) => {\n      if (state.list.filter(item => item.cartItemId == detail.name)[0].goodsCount == value) return\n      Toast.loading({ message: '修改中...', forbidClick: true });\n      const params = {\n        cartItemId: detail.name,\n        goodsCount: value\n      }\n      await modifyCart(params)\n      state.list.forEach(item => {\n        if (item.cartItemId == detail.name) {\n          item.goodsCount = value\n        }\n      })\n      Toast.clear();\n    }\n\n    const onSubmit = async () => {\n      if (state.result.length == 0) {\n        Toast.fail('请选择商品进行结算')\n        return\n      }\n      const params = JSON.stringify(state.result)\n      console.log(params);\n      router.push({ path: '/create-order', query: { cartItemIds: params } })\n    }\n\n    //删除商品\n    const deleteGood = async (id) => {\n      // console.log(id);\n      await deleteCartItem(id)\n      store.dispatch('updateCart')\n      init()\n    }\n\n    const groupChange = (result) => {\n      console.log(result);\n      state.checkAll = result.length == state.list.length ? true : false\n    }\n\n    const allCheck = () => {\n      if (!state.checkAll) {\n        state.result = state.list.map(item => item.cartItemId)\n      } else {\n        state.result = []\n      }\n    }\n\n\n\n    return {\n      ...toRefs(state),\n      total,\n      goBack,\n      goTo,\n      onChange,\n      onSubmit,\n      deleteGood,\n      groupChange,\n      allCheck\n    }\n  }\n}\n</script>\n\n<style lang=\"less\">\n@import '../common/style/mixin';\n\n.cart-box {\n  .cart-header {\n    position: fixed;\n    top: 0;\n    left: 0;\n    z-index: 10000;\n    .fj();\n    .wh(100%, 44px);\n    line-height: 44px;\n    padding: 0 10px;\n    .boxSizing();\n    color: #252525;\n    background: #fff;\n    border-bottom: 1px solid #dcdcdc;\n\n    .cart-name {\n      font-size: 14px;\n    }\n  }\n\n  .cart-body {\n    margin: 16px 0 100px 0;\n    padding-left: 10px;\n\n    .good-item {\n      display: flex;\n\n      .good-img {\n        img {\n          .wh(100px, 100px)\n        }\n      }\n\n      .good-desc {\n        display: flex;\n        flex-direction: column;\n        justify-content: space-between;\n        flex: 1;\n        padding: 20px;\n\n        .good-title {\n          display: flex;\n          justify-content: space-between;\n        }\n\n        .good-btn {\n          display: flex;\n          justify-content: space-between;\n\n          .price {\n            font-size: 16px;\n            color: red;\n            line-height: 28px;\n          }\n\n          .van-icon-delete {\n            font-size: 20px;\n            margin-top: 4px;\n          }\n        }\n      }\n    }\n\n    .delete-button {\n      width: 50px;\n      height: 100%;\n    }\n  }\n\n  .empty {\n    width: 50%;\n    margin: 0 auto;\n    text-align: center;\n    margin-top: 200px;\n\n    .empty-cart {\n      width: 150px;\n      margin-bottom: 20px;\n    }\n\n    .van-icon-smile-o {\n      font-size: 50px;\n    }\n\n    .title {\n      font-size: 16px;\n      margin-bottom: 20px;\n    }\n  }\n\n  .submit-all {\n    margin-bottom: 50px;\n\n    .van-checkbox {\n      margin-left: 10px\n    }\n\n    .van-submit-bar__text {\n      margin-right: 10px\n    }\n\n    .van-submit-bar__button {\n      background: @primary;\n    }\n  }\n\n  .van-checkbox__icon--checked .van-icon {\n    background-color: @primary;\n    border-color: @primary;\n  }\n}\n</style>\n","import { render } from \"./Cart.vue?vue&type=template&id=304a95b0\"\nimport script from \"./Cart.vue?vue&type=script&lang=js\"\nexport * from \"./Cart.vue?vue&type=script&lang=js\"\n\nimport \"./Cart.vue?vue&type=style&index=0&id=304a95b0&lang=less\"\n\nimport exportComponent from \"C:\\\\Users\\\\大娱乐家\\\\Desktop\\\\h5-master\\\\code-vue3\\\\NewBee-vue3\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","$setup","_createElementBlock","_hoisted_2","onClick","_toDisplayString","$props","_hoisted_4","_hoisted_5","props","name","type","String","default","back","noback","Boolean","emits","setup","ctx","isback","ref","router","useRouter","goBack","push","path","go","emit","__exports__","render","src","alt","_createVNode","_component_s_header","_component_van_checkbox_group","onChange","_ctx","$event","_Fragment","_renderList","item","index","_createBlock","_component_van_swipe_cell","key","right","_component_van_button","square","icon","cartItemId","_component_van_checkbox","prefix","goodsCoverImg","goodsName","goodsCount","sellingPrice","_component_van_stepper","integer","min","max","length","_component_van_submit_bar","price","onSubmit","checked","_hoisted_12","_hoisted_13","round","color","block","_component_nav_bar","components","navBar","sHeader","store","useStore","state","reactive","list","all","result","checkAll","onMounted","init","async","message","forbidClick","data","getCart","pageNumber","console","log","map","total","computed","_list","filter","includes","ret","reduce","pre","current","goTo","value","detail","params","modifyCart","forEach","JSON","stringify","query","cartItemIds","deleteGood","deleteCartItem","id","dispatch","groupChange","allCheck","toRefs"],"sourceRoot":""}