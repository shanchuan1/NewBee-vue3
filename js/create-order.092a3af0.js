"use strict";(self["webpackChunkNewBee"]=self["webpackChunkNewBee"]||[]).push([[763],{7554:function(a,s,e){e.d(s,{Z:function(){return _}});var d=e(3396),r=e(7139);const t=a=>((0,d.dD)("data-v-366c0458"),a=a(),(0,d.Cn)(),a),c={class:"simple-header van-hairline--bottom"},n={key:1},o={class:"simple-header-name"},l=t((()=>(0,d._)("i",{class:"nbicon nbmore"},null,-1))),i=t((()=>(0,d._)("div",{class:"block"},null,-1)));function u(a,s,e,t,u,p){return(0,d.wg)(),(0,d.iD)(d.HY,null,[(0,d._)("header",c,[t.isback?((0,d.wg)(),(0,d.iD)("i",n,"      ")):((0,d.wg)(),(0,d.iD)("i",{key:0,class:"nbicon nbfanhui",onClick:s[0]||(s[0]=(...a)=>t.goBack&&t.goBack(...a))})),(0,d._)("div",o,(0,r.zw)(e.name),1),l]),i],64)}var p=e(4870),g=e(678),v={props:{name:{type:String,default:""},back:{type:String,default:""},noback:{type:Boolean,default:!1}},emits:["callback"],setup(a,s){const e=(0,p.iH)(a.noback),d=(0,g.tv)(),r=()=>{a.back?d.push({path:a.back}):d.go(-1),s.emit("callback")};return{goBack:r,isback:e}}},m=e(89);const w=(0,m.Z)(v,[["render",u],["__scopeId","data-v-366c0458"]]);var _=w},6288:function(a,s,e){e.r(s),e.d(s,{default:function(){return Z}});var d=e(3396),r=e(7139);const t=a=>((0,d.dD)("data-v-a749294e"),a=a(),(0,d.Cn)(),a),c={class:"create-order"},n={class:"name"},o={class:"address"},l={class:"good"},i={class:"good-img"},u=["src"],p={class:"good-desc"},g={class:"good-title"},v={class:"good-btn"},m={class:"price"},w={class:"pay-wrap"},_={class:"price"},k=t((()=>(0,d._)("span",null,"商品价格",-1))),b=(0,d.Uk)("生成订单");function h(a,s,e,t,h,f){const y=(0,d.up)("s-header"),I=(0,d.up)("van-icon"),z=(0,d.up)("van-button");return(0,d.wg)(),(0,d.iD)("div",c,[(0,d.Wm)(y,{title:"生成订单"}),(0,d._)("div",{class:"address-wrap",onClick:s[0]||(s[0]=(...a)=>t.goToAddress&&t.goToAddress(...a))},[(0,d._)("div",n,[(0,d._)("span",null,(0,r.zw)(a.address.userName),1),(0,d._)("span",null,(0,r.zw)(a.address.userPhone),1)]),(0,d._)("div",o,(0,r.zw)(a.address.provinceName)+" "+(0,r.zw)(a.address.cityName)+" "+(0,r.zw)(a.address.regionName)+" "+(0,r.zw)(a.address.detailAddress),1),(0,d.Wm)(I,{class:"arrow",name:"arrow"})]),(0,d._)("div",l,[((0,d.wg)(!0),(0,d.iD)(d.HY,null,(0,d.Ko)(a.cartList,(a=>((0,d.wg)(),(0,d.iD)("div",{class:"good-item",key:a.cartItemId},[(0,d._)("div",i,[(0,d._)("img",{src:a.goodsCoverImg,alt:""},null,8,u)]),(0,d._)("div",p,[(0,d._)("div",g,[(0,d._)("span",null,(0,r.zw)(a.goodsName),1),(0,d._)("span",null,"x"+(0,r.zw)(a.goodsCount),1)]),(0,d._)("div",v,[(0,d._)("div",m,"￥"+(0,r.zw)(a.sellingPrice),1)])])])))),128))]),(0,d._)("div",w,[(0,d._)("div",_,[k,(0,d._)("span",null,"￥"+(0,r.zw)(t.totalPrice),1)]),(0,d.Wm)(z,{type:"primary",class:"pay-btn",color:"#1baeae"},{default:(0,d.w5)((()=>[b])),_:1})])])}e(767);var f=e(7619),y=e(8809),I=e(7554),z=e(4870),C=e(678),N={setup(){const a=(0,C.yj)(),s=(0,C.tv)(),e=(0,z.qj)({cartList:[],address:{}});(0,d.bv)((()=>{r()}));const r=async()=>{f.Z.loading({message:"加载中...",forbidClick:!0});const{cartItemIds:d,addressId:r}=a.query;let t=[];d?((0,y.co)("cartItemIds",d),t=JSON.parse(d)):t=JSON.parse((0,y.tv)("cartItemIds"));const{data:c}=await(0,y.or)({cartItemIds:t.join(",")}),{data:n}=r?await(0,y.HQ)(r):await(0,y.oX)();n?(e.cartList=c,e.address=n,console.log(n),f.Z.clear()):s.push({path:"/address"})},t=(0,d.Fl)((()=>{let a=e.cartList.reduce(((a,s)=>a+s.goodsCount*s.sellingPrice),0);return a})),c=()=>{s.push({path:"/address",query:{id:e.address.addressId}})};return{...(0,z.BK)(e),totalPrice:t,goToAddress:c}},components:{sHeader:I.Z}},D=e(89);const B=(0,D.Z)(N,[["render",h],["__scopeId","data-v-a749294e"]]);var Z=B}}]);
//# sourceMappingURL=create-order.092a3af0.js.map