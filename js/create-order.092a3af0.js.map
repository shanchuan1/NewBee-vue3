{"version":3,"file":"js/create-order.092a3af0.js","mappings":"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","sources":["webpack://NewBee/./src/components/SimpleHeader.vue","webpack://NewBee/./src/components/SimpleHeader.vue?b208","webpack://NewBee/./src/views/CreateOrder.vue","webpack://NewBee/./src/views/CreateOrder.vue?30a6"],"sourcesContent":["<template>\n  <header class=\"simple-header van-hairline--bottom\">\n    <i v-if=\"!isback\" class=\"nbicon nbfanhui\" @click=\"goBack\"></i>\n    <i v-else>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</i>\n    <div class=\"simple-header-name\">{{ name }}</div>\n    <i class=\"nbicon nbmore\"></i>\n  </header>\n  <div class=\"block\" />\n</template>\n\n<script>\nimport { ref } from 'vue'\nimport { useRouter } from 'vue-router'\nexport default {\n  props: {\n    name: {\n      type: String,\n      default: ''\n    },\n    back: {\n      type: String,\n      default: ''\n    },\n    noback: {\n      type: Boolean,\n      default: false\n    }\n  },\n  emits: ['callback'],\n  setup(props, ctx) {\n    const isback = ref(props.noback)\n    const router = useRouter()\n    const goBack = () => {\n      if (!props.back) {\n        router.go(-1)\n      } else {\n        router.push({ path: props.back })\n      }\n      ctx.emit('callback')\n    }\n    return {\n      goBack,\n      isback\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n  @import '../common/style/mixin';\n  .simple-header {\n    position: fixed;\n    top: 0;\n    left: 0;\n    z-index: 10000;\n    .fj();\n    .wh(100%, 44px);\n    line-height: 44px;\n    padding: 0 10px;\n    .boxSizing();\n    color: #252525;\n    background: #fff;\n    .simple-header-name {\n      font-size: 14px;\n    }\n  }\n  .block {\n    height: 44px;\n  }\n</style>","import { render } from \"./SimpleHeader.vue?vue&type=template&id=366c0458&scoped=true\"\nimport script from \"./SimpleHeader.vue?vue&type=script&lang=js\"\nexport * from \"./SimpleHeader.vue?vue&type=script&lang=js\"\n\nimport \"./SimpleHeader.vue?vue&type=style&index=0&id=366c0458&lang=less&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\大娱乐家\\\\Desktop\\\\h5-master\\\\code-vue3\\\\NewBee-vue3\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-366c0458\"]])\n\nexport default __exports__","<template>\n  <div class=\"create-order\">\n    <s-header :title=\"'生成订单'\"></s-header>\n    <div class=\"address-wrap\" @click=\"goToAddress\">\n      <div class=\"name\">\n        <span>{{address.userName}}</span>\n        <span>{{address.userPhone}}</span>\n      </div>\n      <div class=\"address\">{{address.provinceName}} {{address.cityName}} {{address.regionName}} {{address.detailAddress}}</div>\n      <van-icon class=\"arrow\" name=\"arrow\" />\n    </div>\n    <div class=\"good\">\n      <div class=\"good-item\" v-for=\"item in cartList\" :key=\"item.cartItemId\">\n        <div class=\"good-img\">\n          <img :src=\"item.goodsCoverImg\" alt=\"\">\n        </div>\n        <div class=\"good-desc\">\n          <div class=\"good-title\">\n            <span>{{item.goodsName}}</span>\n            <span>x{{item.goodsCount}}</span>\n          </div>\n          <div class=\"good-btn\">\n            <div class=\"price\">￥{{item.sellingPrice}}</div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"pay-wrap\">\n      <div class=\"price\">\n        <span>商品价格</span>\n        <span>￥{{totalPrice}}</span>\n      </div>\n      <van-button type=\"primary\" class=\"pay-btn\" color=\"#1baeae\">生成订单</van-button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { getLocal, setLocal } from '../request/api'\nimport { getByCartItemIds } from '../request/api'\nimport { getAddressDetail, getDefaultAddress } from '../request/api'\n\n\nimport sHeader from '@/components/SimpleHeader'\nimport { computed, onMounted, reactive, toRefs } from '@vue/runtime-core'\nimport { Toast } from 'vant'\nimport { useRoute, useRouter } from 'vue-router'\n\nexport default {\n  setup() {\n    const route = useRoute()\n    const router = useRouter()\n    const state = reactive({\n      cartList: [],\n      address: {}\n    })\n    onMounted(() => {\n      init()\n    })\n\n    const init = async() => {\n      Toast.loading({ message: '加载中...', forbidClick: true })\n      // console.log(route.query.cartItemIds);\n      const { cartItemIds, addressId } = route.query\n      \n\n      let _cartItemIds = []\n      if (cartItemIds) {\n        setLocal('cartItemIds', cartItemIds)\n        _cartItemIds = JSON.parse(cartItemIds)\n      } else {\n        _cartItemIds = JSON.parse(getLocal('cartItemIds'))\n      }\n      \n      const { data } = await getByCartItemIds({ cartItemIds: _cartItemIds.join(',')})\n      // console.log(data);\n      // 获取收获地址\n      const { data: address } = addressId ? await getAddressDetail(addressId) : await getDefaultAddress()\n      if (!address) {    //判断是否有收获地址\n        router.push({ path: '/address' })\n        return\n      }\n      state.cartList = data\n      state.address = address\n      console.log(address);\n      Toast.clear()\n    }\n\n    const totalPrice = computed(() => {\n      \n\n      let ret = state.cartList.reduce((pre, current) => {\n        return pre + current.goodsCount * current.sellingPrice\n      }, 0)\n      return ret\n    })\n\n    const goToAddress = () => {\n      router.push({ path: '/address', query: { id: state.address.addressId } })\n    }\n\n    return {\n      ...toRefs(state),\n      totalPrice,\n      goToAddress\n    }\n  },\n  components: {\n    sHeader\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n@import \"../common/style/mixin\";\n.create-order {\n  background: #f9f9f9;\n  .address-wrap {\n    margin-bottom: 20px;\n    background: #fff;\n    position: relative;\n    font-size: 14px;\n    padding: 15px;\n    color: #222333;\n    .name,\n    .address {\n      margin: 10px 0;\n    }\n    .arrow {\n      position: absolute;\n      right: 10px;\n      top: 50%;\n      transform: translateY(-50%);\n      font-size: 20px;\n    }\n    &::before {\n      position: absolute;\n      right: 0;\n      bottom: 0;\n      left: 0;\n      height: 2px;\n      background: -webkit-repeating-linear-gradient(\n        135deg,\n        #ff6c6c 0,\n        #ff6c6c 20%,\n        transparent 0,\n        transparent 25%,\n        #1989fa 0,\n        #1989fa 45%,\n        transparent 0,\n        transparent 50%\n      );\n      background: repeating-linear-gradient(\n        -45deg,\n        #ff6c6c 0,\n        #ff6c6c 20%,\n        transparent 0,\n        transparent 25%,\n        #1989fa 0,\n        #1989fa 45%,\n        transparent 0,\n        transparent 50%\n      );\n      background-size: 80px;\n      content: \"\";\n    }\n  }\n  .good {\n    margin-bottom: 120px;\n  }\n  .good-item {\n    padding: 10px;\n    background: #fff;\n    display: flex;\n    .good-img {\n      img {\n        .wh(100px, 100px);\n      }\n    }\n    .good-desc {\n      display: flex;\n      flex-direction: column;\n      justify-content: space-between;\n      flex: 1;\n      padding: 20px;\n      .good-title {\n        display: flex;\n        justify-content: space-between;\n      }\n      .good-btn {\n        display: flex;\n        justify-content: space-between;\n        .price {\n          font-size: 16px;\n          color: red;\n          line-height: 28px;\n        }\n        .van-icon-delete {\n          font-size: 20px;\n          margin-top: 4px;\n        }\n      }\n    }\n  }\n  .pay-wrap {\n    position: fixed;\n    bottom: 0;\n    left: 0;\n    width: 100%;\n    background: #fff;\n    padding: 10px 0;\n    padding-bottom: 50px;\n    border-top: 1px solid #e9e9e9;\n    > div {\n      display: flex;\n      justify-content: space-between;\n      padding: 0 5%;\n      margin: 10px 0;\n      font-size: 14px;\n      span:nth-child(2) {\n        color: red;\n        font-size: 18px;\n      }\n    }\n    .pay-btn {\n      position: fixed;\n      bottom: 7px;\n      right: 0;\n      left: 0;\n      width: 90%;\n      margin: 0 auto;\n    }\n  }\n}\n</style>","import { render } from \"./CreateOrder.vue?vue&type=template&id=a749294e&scoped=true\"\nimport script from \"./CreateOrder.vue?vue&type=script&lang=js\"\nexport * from \"./CreateOrder.vue?vue&type=script&lang=js\"\n\nimport \"./CreateOrder.vue?vue&type=style&index=0&id=a749294e&lang=less&scoped=true\"\n\nimport exportComponent from \"C:\\\\Users\\\\大娱乐家\\\\Desktop\\\\h5-master\\\\code-vue3\\\\NewBee-vue3\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-a749294e\"]])\n\nexport default __exports__"],"names":["class","_createElementVNode","$setup","_createElementBlock","_hoisted_2","onClick","_toDisplayString","$props","_hoisted_4","_hoisted_5","props","name","type","String","default","back","noback","Boolean","emits","setup","ctx","isback","ref","router","useRouter","goBack","push","path","go","emit","__exports__","render","_createVNode","_component_s_header","title","_ctx","userName","userPhone","provinceName","cityName","regionName","detailAddress","_component_van_icon","_Fragment","_renderList","item","key","cartItemId","src","goodsCoverImg","alt","goodsName","goodsCount","sellingPrice","_hoisted_13","_component_van_button","color","route","useRoute","state","reactive","cartList","address","onMounted","init","async","message","forbidClick","cartItemIds","addressId","query","_cartItemIds","setLocal","JSON","parse","getLocal","data","getByCartItemIds","join","getAddressDetail","getDefaultAddress","console","log","totalPrice","computed","ret","reduce","pre","current","goToAddress","id","toRefs","components","sHeader"],"sourceRoot":""}