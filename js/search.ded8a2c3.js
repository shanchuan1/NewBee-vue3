"use strict";(self["webpackChunkNewBee"]=self["webpackChunkNewBee"]||[]).push([[464],{3310:function(e,a,t){t.r(a),t.d(a,{default:function(){return I}});var o=t(3396),n=t(9242),s=t(7139);const r=e=>((0,o.dD)("data-v-895515d8"),e=e(),(0,o.Cn)(),e),i={class:"product-list-wrap"},d={class:"product-list-content"},c={class:"category-header wrap"},l={class:"header-search"},g=r((()=>(0,o._)("i",{class:"nbicon nbSearch"},null,-1))),p={class:"content"},u=["onClick"],h=["src"],f={class:"product-info"},y={class:"name"},w={class:"subtitle"},k={class:"price"},m={key:1,class:"empty",src:"https://s.yezgea02.com/1604041313083/kesrtd.png",alt:"搜索"};function v(e,a,t,r,v,_){const b=(0,o.up)("van-tab"),C=(0,o.up)("van-tabs"),B=(0,o.up)("van-list"),L=(0,o.up)("van-pull-refresh");return(0,o.wg)(),(0,o.iD)("div",i,[(0,o._)("div",d,[(0,o._)("header",c,[(0,o._)("i",{class:"nbicon nbfanhui",onClick:a[0]||(a[0]=(...e)=>r.goBack&&r.goBack(...e))}),(0,o._)("div",l,[g,(0,o.wy)((0,o._)("input",{type:"text",class:"search-title","onUpdate:modelValue":a[1]||(a[1]=a=>e.keyword=a),onKeyup:a[2]||(a[2]=(0,n.D2)(((...e)=>r.getSearch&&r.getSearch(...e)),["enter"]))},null,544),[[n.nr,e.keyword]])]),(0,o._)("span",{class:"search-btn",onClick:a[3]||(a[3]=(...e)=>r.getSearch&&r.getSearch(...e))},"搜索")]),(0,o.Wm)(C,{type:"card",color:"#1baeae",onClick:r.changeTab},{default:(0,o.w5)((()=>[(0,o.Wm)(b,{title:"推荐",name:""}),(0,o.Wm)(b,{title:"新品",name:"new"}),(0,o.Wm)(b,{title:"价格",name:"price"})])),_:1},8,["onClick"])]),(0,o._)("div",p,[(0,o.Wm)(L,{modelValue:e.refreshing,"onUpdate:modelValue":a[5]||(a[5]=a=>e.refreshing=a),onRefresh:r.onRefresh,class:"product-list-refresh"},{default:(0,o.w5)((()=>[(0,o.Wm)(B,{loading:e.loading,"onUpdate:loading":a[4]||(a[4]=a=>e.loading=a),finished:e.finished,"finished-text":e.productList.length?"没有更多了":"搜索想要的商品",onLoad:r.onLoad,onOffset:e=>10},{default:(0,o.w5)((()=>[e.productList.length?((0,o.wg)(!0),(0,o.iD)(o.HY,{key:0},(0,o.Ko)(e.productList,((a,t)=>((0,o.wg)(),(0,o.iD)("div",{class:"product-item",key:t,onClick:e=>r.productDetail(a.goodsId)},[(0,o._)("img",{src:e.$filters.prefix(a.goodsCoverImg)},null,8,h),(0,o._)("div",f,[(0,o._)("p",y,(0,s.zw)(a.goodsName),1),(0,o._)("p",w,(0,s.zw)(a.goodsIntro),1),(0,o._)("span",k,"￥ "+(0,s.zw)(a.sellingPrice),1)])],8,u)))),128)):((0,o.wg)(),(0,o.iD)("img",m))])),_:1},8,["loading","finished","finished-text","onLoad"])])),_:1},8,["modelValue","onRefresh"])])])}var _=t(8809),b=t(4870),C=t(678),B={setup(){const e=(0,C.yj)(),a=(0,C.tv)(),t=(0,b.qj)({keyword:e.query.keyword||"",searchBtn:!1,seclectActive:!1,refreshing:!1,list:[],loading:!1,finished:!1,productList:[],totalPage:0,page:1,orderBy:""}),o=async()=>{const{categoryId:a}=e.query;if(!a&&!t.keyword)return t.finished=!0,void(t.loading=!1);const{data:o,data:{list:n}}=await(0,_.yC)({pageNumber:t.page,goodsCategoryId:a,keyword:t.keyword,orderBy:t.orderBy});console.log(o),t.productList=t.productList.concat(n),t.totalPage=o.totalPage,t.loading=!1,t.page>=o.totalPage&&(t.finished=!0)},n=()=>{a.go(-1)},s=e=>{console.log(e),a.push({path:"/product",query:{id:e}})},r=()=>{d()},i=()=>{!t.refreshing&&t.page<t.totalPage&&(t.page=t.page+1),t.refreshing&&(t.productList=[],t.refreshing=!1),o()},d=()=>{t.refreshing=!0,t.finished=!1,t.loading=!0,t.page=1,i()},c=e=>{console.log("name",e),t.orderBy=e,d()};return{...(0,b.BK)(t),goBack:n,productDetail:s,getSearch:r,changeTab:c,onLoad:i,onRefresh:d}}},L=t(89);const D=(0,L.Z)(B,[["render",v],["__scopeId","data-v-895515d8"]]);var I=D}}]);
//# sourceMappingURL=search.ded8a2c3.js.map